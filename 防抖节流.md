# 函数防抖和节流

在前端开发的过程中，我们经常会需要绑定一些持续触发的事件，如 resize、scroll、mousemove 等等，但有些时候我们并不希望在事件持续触发的过程中那么频繁地去执行函数。

通常这种情况下我们怎么去解决的呢？一般来讲，防抖和节流是比较好的解决方案。

让我们先来看看在事件持续触发的过程中频繁执行函数是怎样的一种情况。

html 文件中代码如下

```html
<div id="content" style="height:150px;line-height:150px;text-align:center; color: #fff;background-color:#ccc;font-size:80px;"></div>
<script>
    let num = 1;
    let content = document.getElementById('content');

    function count() {
        content.innerHTML = num++;
    };
    content.onmousemove = count;
</script>
```

在上述代码中，div 元素绑定了 mousemove 事件，当鼠标在 div（灰色）区域中移动的时候会持续地去触发该事件导致频繁执行函数。效果如下

<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABGwAAAEiCAYAAACsmkTnAAAZRElEQVR4Xu3YQQ0AMAwDsZU/tILapKG4h4sgcvrK7O49jgABAgQIECBAgAABAgQIECBAICMwBptMF4IQIECAAAECBAgQIECAAAECBL6AwcYjECBAgAABAgQIECBAgAABAgRiAgabWCHiECBAgAABAgQIECBAgAABAgQMNn6AAAECBAgQIECAAAECBAgQIBATMNjEChGHAAECBAgQIECAAAECBAgQIGCw8QMECBAgQIAAAQIECBAgQIAAgZiAwSZWiDgECBAgQIAAAQIECBAgQIAAAYONHyBAgAABAgQIECBAgAABAgQIxAQMNrFCxCFAgAABAgQIECBAgAABAgQIGGz8AAECBAgQIECAAAECBAgQIEAgJmCwiRUiDgECBAgQIECAAAECBAgQIEDAYOMHCBAgQIAAAQIECBAgQIAAAQIxAYNNrBBxCBAgQIAAAQIECBAgQIAAAQIGGz9AgAABAgQIECBAgAABAgQIEIgJGGxihYhDgAABAgQIECBAgAABAgQIEDDY+AECBAgQIECAAAECBAgQIECAQEzAYBMrRBwCBAgQIECAAAECBAgQIECAgMHGDxAgQIAAAQIECBAgQIAAAQIEYgIGm1gh4hAgQIAAAQIECBAgQIAAAQIEDDZ+gAABAgQIECBAgAABAgQIECAQEzDYxAoRhwABAgQIECBAgAABAgQIECBgsPEDBAgQIECAAAECBAgQIECAAIGYgMEmVog4BAgQIECAAAECBAgQIECAAAGDjR8gQIAAAQIECBAgQIAAAQIECMQEDDaxQsQhQIAAAQIECBAgQIAAAQIECBhs/AABAgQIECBAgAABAgQIECBAICZgsIkVIg4BAgQIECBAgAABAgQIECBAwGDjBwgQIECAAAECBAgQIECAAAECMQGDTawQcQgQIECAAAECBAgQIECAAAECBhs/QIAAAQIECBAgQIAAAQIECBCICRhsYoWIQ4AAAQIECBAgQIAAAQIECBAw2PgBAgQIECBAgAABAgQIECBAgEBMwGATK0QcAgQIECBAgAABAgQIECBAgIDBxg8QIECAAAECBAgQIECAAAECBGICBptYIeIQIECAAAECBAgQIECAAAECBAw2foAAAQIECBAgQIAAAQIECBAgEBMw2MQKEYcAAQIECBAgQIAAAQIECBAgYLDxAwQIECBAgAABAgQIECBAgACBmIDBJlaIOAQIECBAgAABAgQIECBAgAABg40fIECAAAECBAgQIECAAAECBAjEBAw2sULEIUCAAAECBAgQIECAAAECBAgYbPwAAQIECBAgQIAAAQIECBAgQCAmYLCJFSIOAQIECBAgQIAAAQIECBAgQMBg4wcIECBAgAABAgQIECBAgAABAjEBg02sEHEIECBAgAABAgQIECBAgAABAgYbP0CAAAECBAgQIECAAAECBAgQiAkYbGKFiEOAAAECBAgQIECAAAECBAgQMNj4AQIECBAgQIAAAQIECBAgQIBATMBgEytEHAIECBAgQIAAAQIECBAgQICAwcYPECBAgAABAgQIECBAgAABAgRiAgabWCHiECBAgAABAgQIECBAgAABAgQMNn6AAAECBAgQIECAAAECBAgQIBATMNjEChGHAAECBAgQIECAAAECBAgQIGCw8QMECBAgQIAAAQIECBAgQIAAgZiAwSZWiDgECBAgQIAAAQIECBAgQIAAAYONHyBAgAABAgQIECBAgAABAgQIxAQMNrFCxCFAgAABAgQIECBAgAABAgQIGGz8AAECBAgQIECAAAECBAgQIEAgJmCwiRUiDgECBAgQIECAAAECBAgQIEDAYOMHCBAgQIAAAQIECBAgQIAAAQIxAYNNrBBxCBAgQIAAAQIECBAgQIAAAQIGGz9AgAABAgQIECBAgAABAgQIEIgJGGxihYhDgAABAgQIECBAgAABAgQIEDDY+AECBAgQIECAAAECBAgQIECAQEzAYBMrRBwCBAgQIECAAAECBAgQIECAgMHGDxAgQIAAAQIECBAgQIAAAQIEYgIGm1gh4hAgQIAAAQIECBAgQIAAAQIEDDZ+gAABAgQIECBAgAABAgQIECAQEzDYxAoRhwABAgQIECBAgAABAgQIECBgsPEDBAgQIECAAAECBAgQIECAAIGYgMEmVog4BAgQIECAAAECBAgQIECAAAGDjR8gQIAAAQIECBAgQIAAAQIECMQEDDaxQsQhQIAAAQIECBAgQIAAAQIECBhs/AABAgQIECBAgAABAgQIECBAICZgsIkVIg4BAgQIECBAgAABAgQIECBAwGDjBwgQIECAAAECBAgQIECAAAECMQGDTawQcQgQIECAAAECBAgQIECAAAECBhs/QIAAAQIECBAgQIAAAQIECBCICRhsYoWIQ4AAAQIECBAgQIAAAQIECBAw2PgBAgQIECBAgAABAgQIECBAgEBMwGATK0QcAgQIECBAgAABAgQIECBAgIDBxg8QIECAAAECBAgQIECAAAECBGICBptYIeIQIECAAAECBAgQIECAAAECBAw2foAAAQIECBAgQIAAAQIECBAgEBMw2MQKEYcAAQIECBAgQIAAAQIECBAgYLDxAwQIECBAgAABAgQIECBAgACBmIDBJlaIOAQIECBAgAABAgQIECBAgAABg40fIECAAAECBAgQIECAAAECBAjEBAw2sULEIUCAAAECBAgQIECAAAECBAgYbPwAAQIECBAgQIAAAQIECBAgQCAmYLCJFSIOAQIECBAgQIAAAQIECBAgQMBg4wcIECBAgAABAgQIECBAgAABAjEBg02sEHEIECBAgAABAgQIECBAgAABAgYbP0CAAAECBAgQIECAAAECBAgQiAkYbGKFiEOAAAECBAgQIECAAAECBAgQMNj4AQIECBAgQIAAAQIECBAgQIBATMBgEytEHAIECBAgQIAAAQIECBAgQICAwcYPECBAgAABAgQIECBAgAABAgRiAgabWCHiECBAgAABAgQIECBAgAABAgQMNn6AAAECBAgQIECAAAECBAgQIBATMNjEChGHAAECBAgQIECAAAECBAgQIGCw8QMECBAgQIAAAQIECBAgQIAAgZiAwSZWiDgECBAgQIAAAQIECBAgQIAAAYONHyBAgAABAgQIECBAgAABAgQIxAQMNrFCxCFAgAABAgQIECBAgAABAgQIGGz8AAECBAgQIECAAAECBAgQIEAgJmCwiRUiDgECBAgQIECAAAECBAgQIEDAYOMHCBAgQIAAAQIECBAgQIAAAQIxAYNNrBBxCBAgQIAAAQIECBAgQIAAAQIGGz9AgAABAgQIECBAgAABAgQIEIgJGGxihYhDgAABAgQIECBAgAABAgQIEDDY+AECBAgQIECAAAECBAgQIECAQEzAYBMrRBwCBAgQIECAAAECBAgQIECAgMHGDxAgQIAAAQIECBAgQIAAAQIEYgIGm1gh4hAgQIAAAQIECBAgQIAAAQIEDDZ+gAABAgQIECBAgAABAgQIECAQEzDYxAoRhwABAgQIECBAgAABAgQIECBgsPEDBAgQIECAAAECBAgQIECAAIGYgMEmVog4BAgQIECAAAECBAgQIECAAAGDjR8gQIAAAQIECBAgQIAAAQIECMQEDDaxQsQhQIAAAQIECBAgQIAAAQIECBhs/AABAgQIECBAgAABAgQIECBAICZgsIkVIg4BAgQIECBAgAABAgQIECBAwGDjBwgQIECAAAECBAgQIECAAAECMQGDTawQcQgQIECAAAECBAgQIECAAAECBhs/QIAAAQIECBAgQIAAAQIECBCICRhsYoWIQ4AAAQIECBAgQIAAAQIECBAw2PgBAgQIECBAgAABAgQIECBAgEBMwGATK0QcAgQIECBAgAABAgQIECBAgIDBxg8QIECAAAECBAgQIECAAAECBGICBptYIeIQIECAAAECBAgQIECAAAECBAw2foAAAQIECBAgQIAAAQIECBAgEBMw2MQKEYcAAQIECBAgQIAAAQIECBAgYLDxAwQIECBAgAABAgQIECBAgACBmIDBJlaIOAQIECBAgAABAgQIECBAgAABg40fIECAAAECBAgQIECAAAECBAjEBAw2sULEIUCAAAECBAgQIECAAAECBAgYbPwAAQIECBAgQIAAAQIECBAgQCAmYLCJFSIOAQIECBAgQIAAAQIECBAgQMBg4wcIECBAgAABAgQIECBAgAABAjEBg02sEHEIECBAgAABAgQIECBAgAABAgYbP0CAAAECBAgQIECAAAECBAgQiAkYbGKFiEOAAAECBAgQIECAAAECBAgQMNj4AQIECBAgQIAAAQIECBAgQIBATMBgEytEHAIECBAgQIAAAQIECBAgQICAwcYPECBAgAABAgQIECBAgAABAgRiAgabWCHiECBAgAABAgQIECBAgAABAgQMNn6AAAECBAgQIECAAAECBAgQIBATMNjEChGHAAECBAgQIECAAAECBAgQIGCw8QMECBAgQIAAAQIECBAgQIAAgZiAwSZWiDgECBAgQIAAAQIECBAgQIAAAYONHyBAgAABAgQIECBAgAABAgQIxAQMNrFCxCFAgAABAgQIECBAgAABAgQIGGz8AAECBAgQIECAAAECBAgQIEAgJmCwiRUiDgECBAgQIECAAAECBAgQIEDAYOMHCBAgQIAAAQIECBAgQIAAAQIxAYNNrBBxCBAgQIAAAQIECBAgQIAAAQIGGz9AgAABAgQIECBAgAABAgQIEIgJGGxihYhDgAABAgQIECBAgAABAgQIEDDY+AECBAgQIECAAAECBAgQIECAQEzAYBMrRBwCBAgQIECAAAECBAgQIECAgMHGDxAgQIAAAQIECBAgQIAAAQIEYgIGm1gh4hAgQIAAAQIECBAgQIAAAQIEDDZ+gAABAgQIECBAgAABAgQIECAQEzDYxAoRhwABAgQIECBAgAABAgQIECBgsPEDBAgQIECAAAECBAgQIECAAIGYgMEmVog4BAgQIECAAAECBAgQIECAAAGDjR8gQIAAAQIECBAgQIAAAQIECMQEDDaxQsQhQIAAAQIECBAgQIAAAQIECBhs/AABAgQIECBAgAABAgQIECBAICZgsIkVIg4BAgQIECBAgAABAgQIECBAwGDjBwgQIECAAAECBAgQIECAAAECMQGDTawQcQgQIECAAAECBAgQIECAAAECBhs/QIAAAQIECBAgQIAAAQIECBCICRhsYoWIQ4AAAQIECBAgQIAAAQIECBAw2PgBAgQIECBAgAABAgQIECBAgEBMwGATK0QcAgQIECBAgAABAgQIECBAgIDBxg8QIECAAAECBAgQIECAAAECBGICBptYIeIQIECAAAECBAgQIECAAAECBAw2foAAAQIECBAgQIAAAQIECBAgEBMw2MQKEYcAAQIECBAgQIAAAQIECBAgYLDxAwQIECBAgAABAgQIECBAgACBmIDBJlaIOAQIECBAgAABAgQIECBAgAABg40fIECAAAECBAgQIECAAAECBAjEBAw2sULEIUCAAAECBAgQIECAAAECBAgYbPwAAQIECBAgQIAAAQIECBAgQCAmYLCJFSIOAQIECBAgQIAAAQIECBAgQMBg4wcIECBAgAABAgQIECBAgAABAjEBg02sEHEIECBAgAABAgQIECBAgAABAgYbP0CAAAECBAgQIECAAAECBAgQiAkYbGKFiEOAAAECBAgQIECAAAECBAgQMNj4AQIECBAgQIAAAQIECBAgQIBATMBgEytEHAIECBAgQIAAAQIECBAgQICAwcYPECBAgAABAgQIECBAgAABAgRiAgabWCHiECBAgAABAgQIECBAgAABAgQMNn6AAAECBAgQIECAAAECBAgQIBATMNjEChGHAAECBAgQIECAAAECBAgQIGCw8QMECBAgQIAAAQIECBAgQIAAgZiAwSZWiDgECBAgQIAAAQIECBAgQIAAAYONHyBAgAABAgQIECBAgAABAgQIxAQMNrFCxCFAgAABAgQIECBAgAABAgQIGGz8AAECBAgQIECAAAECBAgQIEAgJmCwiRUiDgECBAgQIECAAAECBAgQIEDAYOMHCBAgQIAAAQIECBAgQIAAAQIxAYNNrBBxCBAgQIAAAQIECBAgQIAAAQIGGz9AgAABAgQIECBAgAABAgQIEIgJGGxihYhDgAABAgQIECBAgAABAgQIEDDY+AECBAgQIECAAAECBAgQIECAQEzAYBMrRBwCBAgQIECAAAECBAgQIECAgMHGDxAgQIAAAQIECBAgQIAAAQIEYgIGm1gh4hAgQIAAAQIECBAgQIAAAQIEDDZ+gAABAgQIECBAgAABAgQIECAQEzDYxAoRhwABAgQIECBAgAABAgQIECBgsPEDBAgQIECAAAECBAgQIECAAIGYgMEmVog4BAgQIECAAAECBAgQIECAAAGDjR8gQIAAAQIECBAgQIAAAQIECMQEDDaxQsQhQIAAAQIECBAgQIAAAQIECBhs/AABAgQIECBAgAABAgQIECBAICZgsIkVIg4BAgQIECBAgAABAgQIECBAwGDjBwgQIECAAAECBAgQIECAAAECMQGDTawQcQgQIECAAAECBAgQIECAAAECBhs/QIAAAQIECBAgQIAAAQIECBCICRhsYoWIQ4AAAQIECBAgQIAAAQIECBAw2PgBAgQIECBAgAABAgQIECBAgEBMwGATK0QcAgQIECBAgAABAgQIECBAgIDBxg8QIECAAAECBAgQIECAAAECBGICBptYIeIQIECAAAECBAgQIECAAAECBAw2foAAAQIECBAgQIAAAQIECBAgEBMw2MQKEYcAAQIECBAgQIAAAQIECBAgYLDxAwQIECBAgAABAgQIECBAgACBmIDBJlaIOAQIECBAgAABAgQIECBAgAABg40fIECAAAECBAgQIECAAAECBAjEBAw2sULEIUCAAAECBAgQIECAAAECBAgYbPwAAQIECBAgQIAAAQIECBAgQCAmYLCJFSIOAQIECBAgQIAAAQIECBAgQMBg4wcIECBAgAABAgQIECBAgAABAjEBg02sEHEIECBAgAABAgQIECBAgAABAgYbP0CAAAECBAgQIECAAAECBAgQiAkYbGKFiEOAAAECBAgQIECAAAECBAgQMNj4AQIECBAgQIAAAQIECBAgQIBATMBgEytEHAIECBAgQIAAAQIECBAgQICAwcYPECBAgAABAgQIECBAgAABAgRiAgabWCHiECBAgAABAgQIECBAgAABAgQMNn6AAAECBAgQIECAAAECBAgQIBATMNjEChGHAAECBAgQIECAAAECBAgQIGCw8QMECBAgQIAAAQIECBAgQIAAgZiAwSZWiDgECBAgQIAAAQIECBAgQIAAAYONHyBAgAABAgQIECBAgAABAgQIxAQMNrFCxCFAgAABAgQIECBAgAABAgQIGGz8AAECBAgQIECAAAECBAgQIEAgJmCwiRUiDgECBAgQIECAAAECBAgQIEDAYOMHCBAgQIAAAQIECBAgQIAAAQIxAYNNrBBxCBAgQIAAAQIECBAgQIAAAQIGGz9AgAABAgQIECBAgAABAgQIEIgJGGxihYhDgAABAgQIECBAgAABAgQIEDDY+AECBAgQIECAAAECBAgQIECAQEzAYBMrRBwCBAgQIECAAAECBAgQIECAgMHGDxAgQIAAAQIECBAgQIAAAQIEYgIGm1gh4hAgQIAAAQIECBAgQIAAAQIEDDZ+gAABAgQIECBAgAABAgQIECAQEzDYxAoRhwABAgQIECBAgAABAgQIECBgsPEDBAgQIECAAAECBAgQIECAAIGYgMEmVog4BAgQIECAAAECBAgQIECAAAGDjR8gQIAAAQIECBAgQIAAAQIECMQEDDaxQsQhQIAAAQIECBAgQIAAAQIECBhs/AABAgQIECBAgAABAgQIECBAICZgsIkVIg4BAgQIECBAgAABAgQIECBAwGDjBwgQIECAAAECBAgQIECAAAECMQGDTawQcQgQIECAAAECBAgQIECAAAECBhs/QIAAAQIECBAgQIAAAQIECBCICRhsYoWIQ4AAAQIECBAgQIAAAQIECBAw2PgBAgQIECBAgAABAgQIECBAgEBMwGATK0QcAgQIECBAgAABAgQIECBAgIDBxg8QIECAAAECBAgQIECAAAECBGICBptYIeIQIECAAAECBAgQIECAAAECBAw2foAAAQIECBAgQIAAAQIECBAgEBMw2MQKEYcAAQIECBAgQIAAAQIECBAgYLDxAwQIECBAgAABAgQIECBAgACBmIDBJlaIOAQIECBAgAABAgQIECBAgAABg40fIECAAAECBAgQIECAAAECBAjEBAw2sULEIUCAAAECBAgQIECAAAECBAgYbPwAAQIECBAgQIAAAQIECBAgQCAmYLCJFSIOAQIECBAgQIAAAQIECBAgQMBg4wcIECBAgAABAgQIECBAgAABAjEBg02sEHEIECBAgAABAgQIECBAgAABAgYbP0CAAAECBAgQIECAAAECBAgQiAkYbGKFiEOAAAECBAgQIECAAAECBAgQMNj4AQIECBAgQIAAAQIECBAgQIBATMBgEytEHAIECBAgQIAAAQIECBAgQIDAA4yi1BCFbW9tAAAAAElFTkSuQmCC">

可以看到，在没有通过其它操作的情况下，函数被频繁地执行导致页面上数据变化特别快。所以，接下来让我们来看看防抖和节流是如何去解决这个问题的。

### 防抖（debounce）

### 所谓防抖，就是指触发事件后在 n 秒内函数只能执行一次，如果在 n 秒内又触发了事件，则会重新计算函数执行时间。

防抖函数分为非立即执行版和立即执行版。

非立即执行版：

```html
function debounce(func, wait) {
    let timeout;
    return function () {
        let context = this;
        let args = arguments;

        if (timeout) clearTimeout(timeout);
        
        timeout = setTimeout(() => {
            func.apply(context, args)
        }, wait);
    }
}
```
